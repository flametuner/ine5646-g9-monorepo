datasource db {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model Wallet {
  id           Int           @id @default(autoincrement())
  transactions Transaction[]
}

model Transaction {
  id        Int      @id @default(autoincrement())
  timestamp DateTime @default(now())
  amount    Int
  wallet    Wallet   @relation(fields: [walletId], references: [id])
  walletId  Int
  type      TxType
}

model User {
  id           Int        @id @default(autoincrement())
  username     String     @unique
  email        String     @unique
  passwordHash String
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @default(now())
  questions    Question[]
  answers      Answer[]
}

model Question {
  id        Int      @id @default(autoincrement())
  title     String
  createdAt DateTime @default(now())
  expiresAt DateTime
  creator   User     @relation(fields: [creatorId], references: [id])
  creatorId Int
  options   String[]
  answers   Answer[]
}

model Answer {
  id            Int      @id @default(autoincrement())
  choosedOption Int
  when          DateTime @default(now())
  question      Question @relation(fields: [questionId], references: [id])
  questionId    Int
  user          User     @relation(fields: [userId], references: [id])
  userId        Int
}

enum TxType {
  QUESTION
  ANSWER
  CLAIM
}
